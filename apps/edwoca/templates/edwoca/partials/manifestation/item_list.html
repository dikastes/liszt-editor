{% load static message_utils %}
<div id="messages-container">
    {% for message in messages %}
        {% get_message_colors message.tags as colors %}
        <div style="padding: 0.75rem; margin-bottom: 1rem; border-radius: 0.4rem; border: 1px solid {{ colors.br }}; background-color: {{ colors.bg }}; color: {{ colors.cl }}; display: flex; justify-content: space-between; align-items: center; font-family: sans-serif;">
            <div>
                {% if 'safe' in message.tags %}{{ message|safe }}{% else %}{{ message }}{% endif %}
            </div>
            <button type="button" onclick="this.parentElement.remove()" style="background: transparent; border: none; font-size: 1.25rem; cursor: pointer; color: inherit; font-weight: bold;">&times;</button>
        </div>
    {% endfor %}
</div>
{% for item in object.items.all %}
    <div class="flex gap-3 items-center mb-2">
        
        <div class="flex flex-0 gap-1"> 
            {% url 'edwoca:item_swap_order' pk=item.id direction='up' as swap_up_url %}
            <form hx-post="{{ swap_up_url }}" 
                  hx-target="#item-list-container" 
                  hx-swap="innerHTML" 
                  class="flex-0">
                {% csrf_token %}
                <button type="submit" class="btn btn-xs text-gray-500 hover:bg-gray-200 p-1" title="Nach oben verschieben">
                    ↑ Auf
                </button>
            </form>
            
            {% url 'edwoca:item_swap_order' pk=item.id direction='down' as swap_down_url %}
            <form hx-post="{{ swap_down_url }}" 
                  hx-target="#item-list-container" 
                  hx-swap="innerHTML" 
                  class="flex-0">
                {% csrf_token %}
                <button type="submit" class="btn btn-xs text-gray-500 hover:bg-gray-200 p-1" title="Nach unten verschieben">
                    ↓ Ab
                </button>
            </form>
        </div>
        
        <p class="flex-1 m-0">
            <a href="{% url 'edwoca:item_update' item.id %}" class="font-semibold">
                {{ item }}
                {% if item.is_template %}
                    <span class="badge badge-primary badge-sm ml-2">Vorlage</span>
                {% endif %}
            </a>
        </p>
        
        {% if not item.is_template %}
            <a href="{% url 'edwoca:item_set_template' item.id %}" class="btn btn-sm flex-0 ml-2"> Vorlage </a>
        {% endif %}
        <form action="{% url 'edwoca:manifestation_item_delete' item.id %}" method="post" class="flex-0 ml-2">
            {% csrf_token %}
            <input type="submit" class="btn btn-sm btn-error" value="löschen"/>
        </form>
        <button class="btn btn-sm btn-outline ml-2"
        hx-get="{% url 'edwoca:item_move_modal' item.id %}"
        hx-target="#modal-container">
        Verschieben
        </button>
    </div>
{% empty %}
    <p> keine Exemplare </p>
{% endfor %}