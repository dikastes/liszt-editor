{% load i18n %}

{% comment %}
    probably much logic in this template may be moved to the model by declaring some kind of short name function
{% endcomment %}

<ul class="menu p-0">
    {% if object.manifestation.is_collection %}
        <li class="list-row mb-2">
            <a
                href="{% url 'edwoca:manifestation_update' object.manifestation.id %}"
                title="{{ object.manifestation }}">
                ({% translate 'coll' %}) M-{{ object.manifestation.id }}
            </a>
            <ul>
                {% for item in object.manifestation.items.all %}
                    <li>
                        <a
                            href="{% url 'edwoca:item_update' item.id %}"
                            title="{{ item }}"
                            {% if item.id == object.id %}class='active'{% endif %}>
                            ({% translate 'coll' %}) I-{{ item.id }}
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </li>
        {% for part in object.manifestation.collection_parts.all %}
            <li>
                <a
                    href="{% url 'edwoca:manifestation_update' part.id %}"
                    title="{{ part }}">
                    {% if part.is_singleton %}
                        ({% translate 'pt' %}) M/I-{{ part.id }}
                    {% else %}
                        ({% translate 'pt' %}) M-{{ part.id }}
                    {% endif %}
                </a>
                {% if not part.is_singleton %}
                    <ul>
                        {% for item in part.items.all %}
                            <li>
                                <a
                                    href="{% url 'edwoca:item_update' item.id %}"
                                    title="{{ item }}">
                                    ({% translate 'pt' %}) I-{{ item.id }}
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </li>
        {% endfor %}
        {% for component in object.manifestation.collection_components.all %}
            <li>
                <a
                    href="{% url 'edwoca:manifestation_update' component.id %}"
                    title="{{ component }}">
                    {% if component.is_singleton %}
                        ({% translate 'cmp' %}) M/I-{{ component.id }}
                    {% else %}
                        ({% translate 'cmp' %}) M-{{ component.id }}
                    {% endif %}
                </a>
                {% if not component.is_singleton %}
                    <ul>
                        {% for item in component.items.all %}
                            <li>
                                <a 
                                    href="{% url 'edwoca:item_update' item.id %}"
                                    title="{{ item }}">
                                    ({% translate 'cmp' %}) I-{{ item.id }}
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </li>
        {% endfor %}
    {% else %}
        {% if object.manifestation.part_of %}
            <li class="list-row mb-2">
                <a
                    href="{% url 'edwoca:manifestation_update' object.manifestation.part_of.id %}"
                    title="{{ object.manifestation.part_of }}">
                    {% if object.manifestation.part_of.is_singleton %}
                        ({% translate 'coll' %}) M/I-{{ object.manifestation.part_of.id }}
                    {% else %}
                        ({% translate 'coll' %}) M-{{ object.manifestation.part_of.id }}
                    {% endif %}
                </a>
                {% if not object.manifestation.part_of.is_singleton %}
                    <ul>
                        {% for item in object.manifestation.part_of.items.all %}
                            <li>
                                <a
                                    href="{% url 'edwoca:item_update' item.id %}"
                                    title="{{ item }}"
                                    {% if item.id == object.id %}class="active"{% endif %}>
                                    ({% translate 'coll' %}) I-{{ item.id }}
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </li>
            {% for part in object.manifestation.part_of.collection_parts.all %}
                <li>
                    <a
                        href="{% url 'edwoca:manifestation_update' part.id %}"
                        title="{{ part }}">
                        {% if part.is_singleton %}
                            ({% translate 'pt' %}) M/I-{{ part.id }}
                        {% else %}
                            ({% translate 'pt' %}) M-{{ part.id }}
                        {% endif %}
                    </a>
                    {% if not part.is_singleton %}
                        <ul>
                            {% for item in part.items.all %}
                                <li>
                                    <a
                                        href="{% url 'edwoca:item_update' item.id %}"
                                        title="{{ item }}"
                                        {% if object.id == item.id %}class="active"{% endif %}>
                                        ({% translate 'pt' %}) I-{{ item.id }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </li>
            {% endfor %}
            {% for component in object.manifestation.part_of.collection_components.all %}
                <li>
                    <a
                        href="{% url 'edwoca:manifestation_update' component.id %}"
                        title="{{ component }}">
                        {% if component.is_singleton %}
                            ({% translate 'cmp' %}) M/I-{{ component.id }}
                        {% else %}
                            ({% translate 'cmp' %}) M-{{ component.id }}
                        {% endif %}
                    </a>
                    {% if not component.is_singleton %}
                        <ul>
                            {% for item in component.items.all %}
                                <li>
                                    <a 
                                        href="{% url 'edwoca:item_update' item.id %}"
                                        title="{{ item }}"
                                        {% if part.id == item.id %}class="active"{% endif %}>
                                        ({% translate 'cmp' %}) I-{{ item.id }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </li>
            {% endfor %}
        {% else %}
            {% if object.manifestation.component_of %}
                <li class="list-row mb-2">
                    <a
                        href="{% url 'edwoca:manifestation_update' object.manifestation.component_of.id %}"
                        title="{{ object.manifestation.component_of }}">
                        {% if object.manifestation.component_of.is_singleton %}
                            ({% translate 'coll' %}) M/I-{{ object.manifestation.component_of.id }}
                        {% else %}
                            ({% translate 'coll' %}) M-{{ object.manifestation.component_of.id }}
                        {% endif %}
                    </a>
                    {% if not object.manifestation.component_of.is_singleton %}
                        <ul>
                            {% for item in object.manifestation.component_of.items.all %}
                                <li>
                                    <a 
                                        href="{% url 'edwoca:item_update' item.id %}"
                                        title="{{ item }}">
                                        ({% translate 'coll' %}) I-{{ item.id }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </li>
                {% for part in object.manifestation.component_of.collection_parts.all %}
                    <li>
                        <a
                            href="{% url 'edwoca:manifestation_update' part.id %}"
                            title="{{ part }}">
                            {% if part.is_singleton %}
                                ({% translate 'pt' %}) M/I-{{ part.id }}
                            {% else %}
                                ({% translate 'pt' %}) M-{{ part.id }}
                            {% endif %}
                        </a>
                        {% if not part.is_singleton %}
                            <ul>
                                {% for item in part.items.all %}
                                    <li>
                                        <a
                                            href="{% url 'edwoca:item_update' item.id %}"
                                            title="{{ item }}">
                                            ({% translate 'pt' %}) I-{{ item.id }}
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </li>
                {% endfor %}
                {% for component in object.manifestation.component_of.collection_components.all %}
                    <li>
                        <a
                            href="{% url 'edwoca:manifestation_update' component.id %}"
                            title="{{ component }}">
                            {% if component.is_singleton %}
                                ({% translate 'cmp' %}) M/I-{{ component.id }}
                            {% else %}
                                ({% translate 'cmp' %}) M-{{ component.id }}
                            {% endif %}
                        </a>
                        {% if not component.is_singleton %}
                            <ul>
                                {% for item in component.items.all %}
                                    <li>
                                        <a 
                                            href="{% url 'edwoca:item_update' item.id %}"
                                            title="{{ item }}"
                                            {% if item.id == object.id %}class="active"{% endif %}>
                                            ({% translate 'cmp' %}) I-{{ item.id }}
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </li>
                {% endfor %}
            {% else %}
                <li class="list-row mb-2">
                    <a
                        href="{% url 'edwoca:manifestation_update' object.manifestation.id %}"
                        title="{{ object.manifestation }}"
                        class="active">
                        M-{{ object.manifestation.component_of.id }}
                    </a>
                    {% if not object.manifestation.is_singleton %}
                        <ul>
                            {% for item in object.manifestation.items.all %}
                                <li>
                                    <a 
                                        href="{% url 'edwoca:item_update' item.id %}"
                                        title="{{ item }}"
                                        {% if item.id == object.id %}class="active"{% endif %}>
                                        I-{{ item.id }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </li>
            {% endif %}
        {% endif %}
    {% endif %}
</ul>
